<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>
    <script src="lib/mod.js"></script>
</head>
<body>
<script>

    var Promise = require('core/promise');

    function step1() {
        var promise = new Promise();
        setTimeout(function(){
            promise.resolve('some data');
        }, Math.random() * 1000);
        return promise;
    }
    function step2() {
        var promise = new Promise();
        setTimeout(function(){
            promise.resolve('步骤二执行中');
        }, Math.random() * 1000);
        return promise;
    }
    function step3() {
        var promise = new Promise();
        setTimeout(function(){
            console.log('步骤三');
        }, Math.random() * 1000);
        return promise;
    }

    step1().then(function(result){
        console.log('step1');
        console.log(result);
        return 'step1执行中'
    }).then(function(result){
        console.log(result);
    }).then(function(result){
        console.log(result);
        console.log('step1执行结束');
    }).then(step2)
      .then(function(result){
            console.log('step2');
            console.log(result);
       })
       .then(function(){
            console.log('步骤二执行结束');
       });



</script>
</body>
</html>